(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpages/components/comment/comment"],{1217:function(e,n,t){"use strict";var o=t("46af"),r=t.n(o);r.a},"1e13":function(e,n,t){"use strict";t.r(n);var o=t("236f"),r=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=r.a},"236f":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(t("a34a")),r=c(t("5484")),a=(c(t("da96")),t("26cb"));function c(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,o,r,a,c){try{var i=e[a](c),u=i.value}catch(s){return void t(s)}i.done?n(u):Promise.resolve(u).then(o,r)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var a=e.apply(n,t);function c(e){i(a,o,r,c,u,"next",e)}function u(e){i(a,o,r,c,u,"throw",e)}c(void 0)}))}}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){f(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var d={props:{oneInfo:Object,type:String},data:function(){return{commintsList:[],oneInfoClone:[],showCommentBox:!1,cinput:"",disableSendCommentTag:!0}},computed:l({},(0,a.mapState)(["loginState","userInfo"])),created:function(){var e=this;return u(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e.oneInfo),e.oneInfoClone=e.oneInfo,e.getCommentsList();case 3:case"end":return n.stop()}}),n)})))()},watch:{oneInfo:function(e,n){console.log("数据触发了更新："),console.log(e)}},methods:{getCommentsList:function(){var e=this;return u(o.default.mark((function n(){var t,r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("feed"!==e.type){n.next=7;break}return n.next=3,e.$api.getFeedComments();case 3:t=n.sent,e.commintsList=t.data,n.next=11;break;case 7:return n.next=9,e.$api.getNewComments();case 9:r=n.sent,e.commintsList=r.data;case 11:case"end":return n.stop()}}),n)})))()},sendLove:function(){var n=this;return u(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.loginState){t.next=3;break}return n.$refs.login.openLogin(),t.abrupt("return");case 3:"feed"===n.type?n.clickLove(n.oneInfoClone):n.oneInfoClone.has_like?(--n.oneInfoClone.digg_count,n.oneInfoClone.has_like=!1,e.showToast({title:"取消点赞",icon:"success",duration:1e3})):(++n.oneInfoClone.digg_count,n.oneInfoClone.has_like=!0,e.showToast({title:"点赞成功",icon:"success",duration:1e3}));case 4:case"end":return t.stop()}}),t)})))()},gotoComment:function(){var n=e.createSelectorQuery().in(this);n.select("#gohere").boundingClientRect((function(n){e.pageScrollTo({duration:500,scrollTop:n.top})})).exec()},openComment:function(){this.showCommentBox=!0},closeComment:function(){this.showCommentBox=!1},getInput:function(e){this.cinput=e.detail.value,this.cinput?this.disableSendCommentTag=!1:this.disableSendCommentTag=!0},doMsgSecCheck:function(e){return wx.serviceMarket.invokeService({service:"wxee446d7507c68b11",api:"msgSecCheck",data:{Action:"TextApproval",Text:e}})},sendComment:function(){var n=this;return u(o.default.mark((function t(){var a,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.disableSendCommentTag){t.next=2;break}return t.abrupt("return");case 2:return n.disableSendCommentTag=!0,t.prev=3,t.next=6,n.doMsgSecCheck(n.cinput);case 6:if(a=t.sent,!(a.data.Response.EvilTokens.length>0)){t.next=10;break}return e.showModal({title:"敏感词审核",content:"您发布的评论涉及敏感词："+a.data.Response.EvilTokens[0].EvilKeywords}),t.abrupt("return");case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),console.log("敏感词审核过期，请缴费！");case 15:"feed"===n.type?(c=new Date,n.commintsList.push({id:n.oneInfoClone.id,body:n.cinput,user:{avatar:{url:"https://picsum.photos/200/100"},name:n.oneInfoClone.name},created_at:(0,r.default)(c,"yyyy年mm月dd日")}),++n.oneInfoClone.feed_comment_count):(n.commintsList.push({id:n.oneInfoClone.id,body:n.cinput,user:{avatar:{url:"https://picsum.photos/200/100"},name:n.oneInfoClone.name},created_at:(0,r.default)(timestemp,"yyyy年mm月dd日")}),++n.oneInfoClone.comment_count),e.showToast({title:"评论成功",icon:"success",duration:1e3}),n.cinput="",n.closeComment();case 19:case"end":return t.stop()}}),t,null,[[3,12]])})))()}},filters:{timeFormate:function(e){var n=new Date(e),t=n.getTime(),o=(0,r.default)(t,"yyyy年mm月dd日");return o}}};n.default=d}).call(this,t("543d")["default"])},"3a83":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return o}));var o={uAvatar:function(){return t.e("node-modules/uview-ui/components/u-avatar/u-avatar").then(t.bind(null,"c3b2"))},uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"f02a"))},login:function(){return t.e("components/login/login").then(t.bind(null,"f448"))}},r=function(){var e=this,n=e.$createElement,t=(e._self._c,e.__map(e.commintsList,(function(n,t){var o=e.__get_orig(n),r=e._f("timeFormate")(n.created_at);return{$orig:o,f0:r}})));e.$mp.data=Object.assign({},{$root:{l0:t}})},a=[]},"46af":function(e,n,t){},c5e3:function(e,n,t){"use strict";t.r(n);var o=t("3a83"),r=t("1e13");for(var a in r)"default"!==a&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("1217");var c,i=t("f0c5"),u=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"7cb11889",null,!1,o["a"],c);n["default"]=u.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'subpages/components/comment/comment-create-component',
    {
        'subpages/components/comment/comment-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("c5e3"))
        })
    },
    [['subpages/components/comment/comment-create-component']]
]);
